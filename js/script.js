// 1. NPC ë°ì´í„°
const npcs = {
    sion: {
        name: "ì‹œì˜¨",
        sprite: "assets/images/sprites/sion.png",
        portrait: "assets/images/portraits/sion_default.png",
        gifts: {
            love: ["ì»¤í”¼", "ì—ë„ˆì§€ ë“œë§í¬", "ì„¤íƒ•", "íšŒ"],
            hate: ["ë¸”ë¡­í”¼ì‰¬"]
        },
        giftReactions: {
            love: { text: "ì™€... ì´ê±° ì œê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ê±´ë°. ì–´ë–»ê²Œ ì•„ì…¨ì–´ìš”? ì§„ì§œ ê°ë™ì´ë‹¤. ê³ ë§ˆì›Œìš”.", emotion: "default" },
            hate: { text: "ë§ˆìŒì€ ê³ ë§™ì§€ë§Œ... ì´ê±´ ì¢€ ì²˜ì¹˜í•˜ê¸° ê³¤ëž€í•˜ë„¤ìš”.", emotion: "default" },
            default: { text: "ì˜¤, ì„ ë¬¼ì¸ê°€ìš”? ê³ ë§™ìŠµë‹ˆë‹¤.", emotion: "default" }
        },
        unknownReaction: { text: "ìŒ... ë¬´ìŠ¨ ë§ì”€ì´ì‹ ì§€ ìž˜ ëª¨ë¥´ê² ë„¤ìš”.", emotion: "default" },
        locations: { sunny: "hall", rainy: "hall", blossom: "forest" },
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            hall: { top: "75%", left: "25%" },
            forest: { top: "48%", left: "16%" }
        }
    },
    riku: {
        name: "ë¦¬ì¿ ",
        sprite: "assets/images/sprites/riku.png",
        portrait: "assets/images/portraits/riku_default.png",
        unknownReaction: { text: "ì—¥? ê·¸ê²Œ ë­ì˜ˆì—¬? ë¨¹ëŠ” ê±°ì˜ˆì—¬?", emotion: "shock" },
        gifts: {
            love: ["ë„í† ë¦¬", "ì´ˆì½”ì¼€ì´í¬", "ì•„ì´ìŠ¤í¬ë¦¼"],
            hate: ["í™"]
        },
        giftReactions: {
            love: { text: "{user}(ì€)ëŠ” ë¦¬ì¿ ë¥¼ ìž˜ ì•„ëŠ”êµ¬ë‚­? ê³ ë§ˆì›Œì˜!", emotion: "happy" },
            hate: { text: "ì™œ ë¦¬ì¿ í•œí…Œ ì´ëŸ° ê±° ì¤¬ì–´ì—¬? ë¦¬ì¿  ì´ê±° ì‹«ì–´í•˜ëŠ” ê±° ëª°ëžì–´ì—¬? ì†ìƒí•´ì—¬ ã… ã… ", emotion: "serious" },
            default: { text: "ì™€ì•„, ë¦¬ì¿  ë„˜ í–‰ë³µí•´ì˜!", emotion: "default" }
        },
        locations: { sunny: "shop", rainy: "saloon", blossom: "shop" },
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            shop: { top: "75%", left: "24%" },
            saloon: { top: "80%", left: "16%" }
        }
    },
    yushi: {
        name: "ìœ ìš°ì‹œ",
        sprite: "assets/images/sprites/yushi.png",
        portrait: "assets/images/portraits/yushi_default.png",
        gifts: { // gifts ì†ì„± ì¶”ê°€ (ì½”ë“œ ì¼ê´€ì„±ì„ ìœ„í•´ ìž„ì˜ ì¶”ê°€í•¨, í•„ìš”ì‹œ ìˆ˜ì •)
             love: ["ìŠ¤íƒ€í‘¸ë¥´íŠ¸", "ë¸”ë£¨ ìž¬ì¦ˆ"],
             hate: ["ì“°ë ˆê¸°"]
        },
        giftReactions: {
            love: { text: "ì— ! ì € ì£¼ëŠ” ê±°ì˜ˆìš” ? ë„ˆë¬´ ì˜ˆì˜ë‹¤ ~ {user} ì € ì´ê±° ì§„ì§œ ì¢‹ì•„í•´ìš” ! ^_^", emotion: "happy" },
            hate: { text: "ì—..? ì´ê±´.. ë„ˆë¬´í•´ìš” !", emotion: "serious" },
            default: { text: "ê³ ë§ˆì›Œìš” ! ìž˜ ê°„ì§í• ê²Œìš” ^_^ ìš°ë¦¬ ê¸°ë¶„ ì¢‹ì€ ì¶”ì–µì´ í•˜ë‚˜ ë” ìƒê²¼ë„¤ìš” ~", emotion: "default" }
        },
        unknownReaction: { text: "ì—.. ì£„ì†¡í•´ìš”. ë¬´ìŠ¨ ë§ì”€ì´ì‹ ì§€ ìž˜ ëª¨ë¥´ê² ì–´ìš”.. ^_^;", emotion: "shock" },
        locations: { sunny: "forest", rainy: "saloon", blossom: "forest" },
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            forest: { top: "28%", left: "61%" }, // íšŒê´€ì—ì„œëŠ” ì˜¤ë¥¸ìª½ ìœ„ì—
            saloon: { top: "80%", left: "20%" }
        }
    },
    jaehee: { 
        name: "ìž¬í¬",
        sprite: "assets/images/sprites/jaehee.png",
        portrait: "assets/images/portraits/jaehee_default.png",
        gifts: {
            love: ["í–‰ìš´ì˜ ì ì‹¬", "ì—ë„ˆì§€ ë“œë§í¬"],
            hate: ["ì“°ë ˆê¸°"]
        },
        giftReactions: {
            love: { text: "ìš°ì™€ì•„!! ì§„ì§œ ëŒ€ë°•!! ì € ì´ê±° ì§„ì§œ ì¢‹ì•„í•˜ëŠ”ë°! ìµœê³ ì˜ˆìš”!!", emotion: "happy" },
            hate: { text: "ë§ˆìŒì€ ê³ ë§™ì§€ë§Œ.. ì´ê±´ ì¢€ ì²˜ì¹˜í•˜ê¸° ê³¤ëž€í•˜ë„¤ìš”.", emotion: "serious" },
            default: { text: "ì˜¤..! ì™€! ëŒ€ë°•! ë­”ì§€ ëª¨ë¥´ê² ì§€ë§Œ ê·¸ëž˜ë„ {user}(ì´)ê°€ ì¤€ ê±°ë‹ˆê¹Œ ì¼ë‹¨ ìž˜ ì±™ê²¨ë‘˜ê²Œìš”! í—ˆí—ˆ", emotion: "default" }
        },
        unknownReaction: { text: "ì—.. ì£„ì†¡í•´ìš”. ë¬´ìŠ¨ ë§ì”€ì´ì‹ ì§€ ìž˜ ëª¨ë¥´ê² ì–´ìš”.. ^_^;", emotion: "shock" },
        locations: { sunny: "square", rainy: "saloon", blossom: "shop" },
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            shop: { top: "57%", left: "64%" }, 
            saloon: { top: "80%", left: "80%" },
            square: { top: "41%", left: "7%" }
        }
    },
                    
    ryo: { 
        name: "ë£Œ", 
        sprite: "assets/images/sprites/ryo.png",
        portrait: "assets/images/portraits/ryo_default.png",
        gifts: {
            love: ["ë¸”ë¡­í”¼ì‰¬", "ì—ë„ˆì§€ ë“œë§í¬"],
            hate: ["ì“°ë ˆê¸°", "ìž‰ì–´"]
        },
        giftReactions: {
            love: { text: "ì•¼í•˜í•­~! ì§„ì§œ ìµœê³ ! ì´ê±° ì™„ì „ í¬ê·€í•œ ê±´ë°! ê³ ë§ˆì›Œë£Œ!", emotion: "happy" },
            hate: { text: "ì˜¤, ì„¼ìŠ¤ ëŒ€ë°•! ê°ì‚¬í•´ë£Œ!", emotion: "serious" },
            default: { text: "ì„ ë¬¼ì¸ê°€ìš”? ê³ ë§™ìŠµë‹ˆë‹¤.", emotion: "default" }
        },
        unknownReaction: { text: "ì—.. ì£„ì†¡í•´ìš”. ë¬´ìŠ¨ ë§ì”€ì´ì‹ ì§€ ìž˜ ëª¨ë¥´ê² ì–´ìš”.. ^_^;", emotion: "shock" },
        locations: { sunny: "square", rainy: "hall", blossom: "square" }, 
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            hall: { top: "82%", left: "49%" },
            square: { top: "54%", left: "48%" }
        }
    },
    
    sakuya: { 
        name: "ì‚¬ì¿ ì•¼",
        sprite: "assets/images/sprites/sakuya.png",
        portrait: "assets/images/portraits/sakuya_default.png",
        gifts: {
            love: ["í•‘í¬ì¼€ì´í¬"],
            hate: ["ì“°ë ˆê¸°", "ìž‰ì–´"]
        },
        giftReactions: {
            love: { text: "ê³ ë§ˆì›Œìš”. íŠ¹ížˆ ì´ ë”¸ê¸°... í–¥ì´ ë„ˆë¬´ ë‹¬ì½¤í•´ì„œ ê¸°ë¶„ì´ ì¢‹ì•„ì¡Œì–´ìš”", emotion: "happy" },
            hate: { text: "ì•„... ì§„ì§œ ì£„ì†¡í•œë°... ì´ê±´ ë‹¤ë¥¸ ì‚¬ëžŒ ì£¼ëŠ” ê²Œ ì–´ë•Œìš”?", emotion: "serious" },
            default: { text: "ì—- ì—„ì²­ ë‹¤ì •í•˜ë„¤ìš”. ì´ëŸ° ê±¸ ë‹¤ ì±™ê²¨ì£¼ê³ . ê³ ë§™ìŠµë‹ˆë‹¤.", emotion: "default" }
        },
        unknownReaction: { text: "ì—.. ì£„ì†¡í•´ìš”. ë¬´ìŠ¨ ë§ì”€ì´ì‹ ì§€ ìž˜ ëª¨ë¥´ê² ì–´ìš”.. ^_^;", emotion: "shock" },
        locations: { sunny: "square", rainy: "saloon", blossom: "forest" }, 
        // â˜… [ì¶”ê°€] ìž¥ì†Œë³„ ì¢Œí‘œ ì„¤ì • (top: ìœ„ì—ì„œ ê±°ë¦¬, left: ì™¼ìª½ì—ì„œ ê±°ë¦¬)
        positions: {
            forest: { top: "85%", left: "50%" },
            saloon: { top: "75%", left: "41%" },
            square: { top: "25%", left: "43%" }
        }
    }
};

// 2. ëŒ€ë³¸ ë° í‚¤ì›Œë“œ ë°ì´í„°
const dailyScripts = {
    // 1ì¼ì°¨ ëŒ€ì‚¬ (ë°°ì—´ë¡œ ë³€ê²½)
    1: {
        riku: [
            { text: "ëˆ„ë‚˜ ì•ˆë…• ! ìƒˆë¡œ ì´ì‚¬ ì™“ì–´ì—¬??", emotion: "happy" },
            { 
                text: "ì €ëŠ” ë¦¬ì¿ ê³  ìƒì  ì•Œë°”ìƒì´ì—ì—¬ ížˆížˆ ë¦¬ì¿  ë´£ìœ¼ë‹ˆ ëˆ„ë‚˜ëŠ” ìš´ì´ ì¢‹ë‹¹!", 
                emotion: "happy",
                choices: [
                    { label: "ë¦¬ì¿  ê·€ì—½ë„¤", score: 10, reply: "ì—? ì§„ì§œìš©?? ã…Žã…Žã…Žã…Žã…Ž" },
                    { label: "ìžì£¼ ë†€ëŸ¬ì˜¬ê²Œìš”!", score: 5, reply: "ë„¹! ëˆ„ë‚˜ëŠ” íŠ¹ë³„ížˆ ì‚¬ê³¼ í•˜ë‚˜ ë” ì¤„ê²Œìš©" }
                ]
            },
        ],
        
        sion: [
            { text: "ì•„, ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ ê·€ë†í•˜ì‹ ë‹¤ëŠ” ë¶„ ë§žìœ¼ì‹œì£ ?" },
            { 
                text: "ì €ëŠ” ë§ˆì„íšŒê´€ ê´€ë¦¬ë¥¼ ë§¡ê³  ìžˆëŠ” ì˜¤ì‹œì˜¨ìž…ë‹ˆë‹¤.", 
                emotion: "happy",
                choices: [
                    { label: "ë§ˆì„ì„ ìœ„í•´ ì—´ì‹¬ížˆ ì¼í•˜ê² ìŠµë‹ˆë‹¤! ìž˜ ë¶€íƒë“œë ¤ìš”.", score: 5, reply: "ì˜¤... ì—´ì •ì´ ëŒ€ë‹¨í•˜ì‹œë„¤ìš”. ì €ë„ ë„ìš¸ ìˆ˜ ìžˆëŠ” ê±´ ë„ìš¸ê²Œìš”." },
                    { label: "ë„¤ ì–´ì©Œë‹¤ë³´ë‹ˆ...(ã…Žã…Ž) ìž˜ ë¶€íƒë“œë ¤ìš”!", score: 0, reply: "ë„¤, í•„ìš”í•œ ê±° ìžˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”." },
                    { label: "í˜¹ì‹œ... ì†Œëž‘ ëŒ€í™” ê°€ëŠ¥í•˜ì„¸ìš”?", score: 5, reply: "...ë„¤? ì†Œë¥¼ í‚¤ìš°ê¸°ëŠ” í•˜ëŠ”ë° ëŒ€í™”ëŠ”... ìŒ... ì‹œë„ëŠ” í•´ë³¼ê²Œìš”." }
                ]
            },
        ],
        
        yushi: [
            { text: "ì—.. ìƒˆë¡œ ì˜¤ì‹  ë†ìž¥ì£¼ë‹˜ì´ì‹œêµ°ìš” ?", emotion: "default" },
            { text: "ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš” !", emotion: "happy" },
            { 
                text: "ìˆ²ì´ ì°¸ ì¡°ìš©í•˜ê³  ì¢‹ì§€ìš” ? ^_^", 
                emotion: "happy",
                choices: [
                    { label: "ì—¬ê¸°ì„œ ë­í•˜ê³  ê³„ì„¸ìš”?", score: 5, reply: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì•„ìš” ! ì‚¬ëžŒì´ ì—†ëŠ” ê³³ì´ ë§ˆìŒì´ íŽ¸í•´ì„œìš” ^_^" },
                    { label: "ë°¤ì— ë³„ ë³´ë©´ ì˜ˆì  ê²ƒ ê°™ì•„ìš”", score: 10, reply: "ë§žì•„ìš” ! ì¢…ì¢… ë°¤ì— ì™€ì„œ í•˜ëŠ˜ì„ ë³´ëŠ”ë° ì •ë§ ì˜ˆë»ìš” ^_^ ë‹¤ìŒì— ê°™ì´ ë´ìš” ~" }
                ]
            },
        ],

                jaehee: [
            { text: "ì•ˆë…•í•˜ì„¸ìš”!! ì €ëŠ” ìž¬í¬ë¼ê³  í•´ìš”!", emotion: "default" },
            { 
                text: "ì¸ìƒì´ ì •ë§ ì¢‹ìœ¼ì‹œë„¤ìš”! ã…Žã…Ž", 
                emotion: "happy",
                choices: [
                    { label: "ë…¸ëž˜ í•œ ê³¡ ë¶€íƒí•´ìš”", score: 10, reply: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì•„ìš” ! ì‚¬ëžŒì´ ì—†ëŠ” ê³³ì´ ë§ˆìŒì´ íŽ¸í•´ì„œìš” ^_^" },
                    { label: "ë°˜ê°€ì›Œìš” ìž¬í¬ë‹˜", score: 5, reply: "ë§žì•„ìš” ! ì¢…ì¢… ë°¤ì— ì™€ì„œ í•˜ëŠ˜ì„ ë³´ëŠ”ë° ì •ë§ ì˜ˆë»ìš” ^_^ ë‹¤ìŒì— ê°™ì´ ë´ìš” ~" }
                ]
            },
        ],

        ryo: [
            { text: "ì˜¤, ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ë£Œìž…ë‹ˆë‹¤!", emotion: "default" },
            { 
                text: "ë§ˆì„ì— ì‹ ê¸°í•œ ê±° ì°¾ìœ¼ë©´ ì €í•œí…Œ ì œì¼ ë¨¼ì € ë³´ì—¬ì£¼ì…”ì•¼ í•´ìš”! ì œê°€ ë¶„ì„í•´ë“œë¦´ê²Œìš”!", 
                emotion: "happy",
                choices: [
                    { label: "ê°™ì´ ì°¾ìœ¼ëŸ¬ ê°ˆëž˜?", score: 10, reply: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì•„ìš” ! ì‚¬ëžŒì´ ì—†ëŠ” ê³³ì´ ë§ˆìŒì´ íŽ¸í•´ì„œìš” ^_^" },
                    { label: "ë£ŒëŠ” ë˜‘ë˜‘í•˜êµ¬ë‚˜", score: 5, reply: "ë§žì•„ìš” ! ì¢…ì¢… ë°¤ì— ì™€ì„œ í•˜ëŠ˜ì„ ë³´ëŠ”ë° ì •ë§ ì˜ˆë»ìš” ^_^ ë‹¤ìŒì— ê°™ì´ ë´ìš” ~" }
                ]
            },
        ],

        sakuya: [
            { text: "ì—- ì•ˆë…•í•˜ì„¸ìš”. ê°“ êµ¬ìš´ ë¹µ ë“œì…”ë³´ì‹¤ëž˜ìš”?", emotion: "default" },
            { 
                text: "ì•„ ì €ëŠ” ì‚¬ì¿ ì•¼ì˜ˆìš”. ìŠ¤íƒ€ì£¼ì  ì•ˆì— ìžˆëŠ” ë¹µì§‘ì—ì„œ ì¼í•˜ê³  ìžˆì–´ìš”. ë¹µ ì‚¬ëŸ¬ ë§ˆë‹ˆ ì™€ì£¼ì„¸ìš”.", 
                emotion: "happy",
                choices: [
                    { label: "ê³ ë§ˆì›Œ! ìž˜ ë¨¹ì„ê²Œ", score: 5, reply: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì•„ìš” ! ì‚¬ëžŒì´ ì—†ëŠ” ê³³ì´ ë§ˆìŒì´ íŽ¸í•´ì„œìš” ^_^" },
                    { label: "ì‚¬ì¿ ë¹µì¨©ã…Žã…Ž", score: 10, reply: "ë§žì•„ìš” ! ì¢…ì¢… ë°¤ì— ì™€ì„œ í•˜ëŠ˜ì„ ë³´ëŠ”ë° ì •ë§ ì˜ˆë»ìš” ^_^ ë‹¤ìŒì— ê°™ì´ ë´ìš” ~" }
                ]
            },
        ] 
    },

// â˜… ê¸°ì¡´ randomDialogues ì‚­ì œ!
const affinityDialogues = {
    sion: {
        very_low: {
            "ë§‘ìŒ": [
                [
                { text: "...", emotion: "default" },
                { text: "(ê°€ë³ê²Œ ëª©ë¡€ë§Œ í•œë‹¤.)", emotion: "default" }
                ],
                { text: "(ì„œë¥˜ì— ì½”ë¥¼ ë°•ê³  ìžˆë‹¤) ìž ì‹œë§Œìš”. ì´ê²ƒë§Œ ì²˜ë¦¬í•˜ê³ ìš”.", emotion: "default" },
                {
                    text: "ì§€ê¸ˆ ìž‘ì„±í•´ì•¼ í•˜ëŠ” ì„œë¥˜ê°€ ë­”ì§€ ì•„ì„¸ìš”?", 
                    emotion: "default",
                    type: "keyword",
                    answers: {
                        "ì „ìž…ì‹ ê³ ": { text: "ì˜¤, ìž˜ ì•„ì‹œë„¤ìš”. ì €ê¸° í•¨ì— ë„£ì–´ì£¼ì„¸ìš”.", emotion: "default", score: 5 },
                        "ì‹ ê³ ì„œ": { text: "ì˜¤, ìž˜ ì•„ì‹œë„¤ìš”. ì €ê¸° í•¨ì— ë„£ì–´ì£¼ì„¸ìš”.", emotion: "default", score: 5 },
                        "ëª°ë¼": { text: "ìŒ... ì „ìž…ì‹ ê³ ì„œìž…ë‹ˆë‹¤. ì €ê¸° ìžˆì–´ìš”.", emotion: "default", score: 0 },
                        "ë­": { text: "ìŒ... ì „ìž…ì‹ ê³ ì„œìž…ë‹ˆë‹¤. ì €ê¸° ìžˆì–´ìš”.", emotion: "default", score: 0 },
                        "ëª¨ë¥´ê² ": { text: "ìŒ... ì „ìž…ì‹ ê³ ì„œìž…ë‹ˆë‹¤. ì €ê¸° ìžˆì–´ìš”.", emotion: "default", score: 0 }
                    }
                }
            ],
            "ë¹„": [
                { text: "ë¹„ê°€ ì˜¤ë„¤ìš”.", emotion: "default" },
                { 
                text: "í˜¹ì‹œ ìš°ì‚° ìƒ‰ê¹” ë­ì˜ˆìš”? ìž…êµ¬ì— ê½‚ì•„ë‘ì‹  ê±°.", 
                emotion: "happy",
                choices: [
                    { label: "í•‘í¬", score: 3, reply: "ì•„ã…‹ã…‹ ìš°ì‚° ê·€ì—½ë„¤ìš”. ì‚¬ì¿ ì•¼ ê±´ ì¤„ ì•Œì•˜ì–´ìš”." },
                    { label: "íˆ¬ëª…", score: 5, reply: "ì—­ì‹œ íˆ¬ëª…ì´ ì•žì´ ìž˜ ë³´ì—¬ì„œ ì¢‹ì£ . ì‹¤ìš©ì ì´ë„¤ìš”." },
                    { label: "ê²€ì •", score: 0, reply: "ë‹¤ë¥¸ ì‚¬ëžŒë“¤ ê±°ëž‘ ì„žì´ì§€ ì•Šê²Œ ì¡°ì‹¬í•˜ì„¸ìš”." }
                ]
                }
            ],
            
            "ë²šê½ƒ": [
                [
                { text: "ì‚°ì±… ë‚˜ì˜¤ì…¨ì–´ìš”?", emotion: "default" },
                { text: "ìˆ²ì€ ì¡°ìš©í•´ì„œ ì¢‹ì•„ìš”. ìƒê° ì •ë¦¬í•˜ê¸° ë”±ì´ê±°ë“ ìš”.", emotion: "default" },
                ],
                {
                    text: "ì € ë‚˜ë¬´ ì´ë¦„ì´ ë­”ì§€ ì•„ì„¸ìš”? ì œê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ë‚˜ë¬´ì¸ë°.",
                    emotion: "default",
                    type: "keyword",
                    answers: {
                        "ë²š": { text: "ë„¤, ë²šë‚˜ë¬´ìš”. ë´„ì—ë§Œ ë³¼ ìˆ˜ ìžˆëŠ” ê²Œ ì¢€ ì•„ì‰½ì£ .", emotion: "happy", score: 5 },
                        "ì‚¬ê³¼": { text: "ìŒ? ì €ê±´ ë²šë‚˜ë¬´ì˜ˆìš”.", emotion: "default", score: 0 }
                    }
                },
                {
                    text: "ê½ƒê°€ë£¨ ì•Œë ˆë¥´ê¸° ê°™ì€ ê±´ ì—†ìœ¼ì‹œì£ ?",
                    emotion: "default",
                    choices: [
                        { label: "ì™„ì „ íŠ¼íŠ¼í•´ìš”!", score: 0, reply: "ë‹¤í–‰ì´ë„¤ìš”. ê±´ê°•í•œ ê²Œ ìµœê³ ì£ ." },
                        { label: "ì—ì·¨! (ìž¬ì±„ê¸°ë¥¼ ì¥ì–´ì§œë‚¸ë‹¤.)", score: 3, reply: "ì–´, ì¡°ì‹¬í•˜ì„¸ìš”. ë§ˆìŠ¤í¬ ì—¬ë¶„ ìžˆëŠ”ë° ë“œë¦´ê¹Œìš”?" }
                    ]
                }
            ]
        },
        
        low: {
            "ë§‘ìŒ": [
                [
                { text: "ìƒˆë¡œìš´ í™˜ê²½ì´ë¼ ë‚¯ì„¤ì§€ ì•Šìœ¼ì„¸ìš”? ì €ë„ ì²˜ìŒì—” ì ì‘í•˜ëŠ” ë° ì‹œê°„ì´ ì¢€ ê±¸ë ¸ê±°ë“ ìš”.", emotion: "happy" },
                { text: "ê·¸ëž˜ë„ ìž˜ ì§€ë‚´ì‹œëŠ” ê²ƒ ê°™ì•„ ë‹¤í–‰ì´ë„¤ìš”.", emotion: "default" }
                ],
                {
                    text: "ë†ìž¥ì—ì„œ ë­ í‚¤ìš°ì„¸ìš”? ì œê°€ ê´€ì‹¬ ìžˆëŠ” ìž‘ë¬¼ì´ ìžˆëŠ”ë°...", // í‚¤ì›Œë“œ
                    emotion: "shy",
                    type: "keyword",
                    answers: {
                        "ì»¤í”¼": { text: "ì§„ì§œìš”? ìˆ˜í™•í•˜ë©´ ì €í•œí…Œ ì¢€ íŒ”ì•„ì£¼ì‹¤ ìˆ˜ ìžˆë‚˜ìš”?", emotion: "love", score: 5 },
                        "ë°€": { text: "ì˜¤, ì‚¬ì¿ ì•¼ê°€ ì¢‹ì•„í•˜ê² ë‹¤.", emotion: "happy", score: 3 },
                        "íŒŒ": { text: "íŒŒ... ê±´ê°•ì— ì¢‹ì£ . ìš”ë¦¬í•  ë•Œ í•„ìˆ˜ë‹ˆê¹Œ.", emotion: "default", score: 0 }
                    }
                },
                {
                    text: "ìž ê¹ ì‰´ê¹Œ í•˜ëŠ”ë° ê°™ì´ ìŠ¤íŠ¸ë ˆì¹­ì´ë¼ë„ í•˜ì‹¤ëž˜ìš”?",
                    emotion: "happy",
                    choices: [
                        { label: "ì¢‹ì•„ìš”! (ì—†ëŠ” ìœ ì—°ì„±ê¹Œì§€ ëŒì–´ë‹¤ ë½ë‚¸ë‹¤)", score: 3, reply: "ã…‹ã…‹ìœ ì—°í•˜ì‹œë„¤ìš”. ë•ë¶„ì— ìž  ì¢€ ê¹¼ì–´ìš”." },
                        { label: "ì „ ìˆ¨ì‰¬ê¸° ìš´ë™ë§Œ í•©ë‹ˆë‹¤.", score: 0, reply: "ê°€ìž¥ íš¨ìœ¨ì ì¸ ìš´ë™ì´ì£ . ì¸ì •í•©ë‹ˆë‹¤." }
                    ]
                },
                { 
                text: "í˜¹ì‹œ ë§ˆì„íšŒê´€ ì´ìš© ìˆ˜ì¹™ì€ ë‹¤ ì½ì–´ë³´ì…¨ë‚˜ìš”? ê¼¼ê¼¼ížˆ í™•ì¸í•´ì£¼ì‹œëŠ” ê²Œ ì¢‹ì•„ìš”.", 
                emotion: "happy",
                choices: [
                    { label: "í—‰, ìžˆëŠ” ì¤„ ëª°ëžì–´ìš”. ì§€ê¸ˆ ì½ì–´ë³¼ê²Œìš”!", score: 0, reply: "ë„¤. ê¶ê¸ˆí•œ ë¶€ë¶„ ìžˆìœ¼ë©´ ì•Œë ¤ë“œë¦´ê²Œìš”." },
                    { label: "ë„¤! ëˆ„ê°€ ì“´ ê±´ì§€ ì•„ì£¼ ì™„ë²½í•˜ë˜ë°ìš”?", score: 5, reply: "ì•„... ì•Œì•„ë´ ì£¼ì‹œë‹ˆ ê°ì‚¬í•˜ë„¤ìš”. ì—´ì‹¬ížˆ ì¼ê±°ë“ ìš”." }
                ]
            },
                { 
                text: "ë†ìž¥ ì¼ì€ ì²˜ìŒì´ë¼ ë¶€ì¡±í•œ ê²Œ ë§Žì„ í…ë°, í˜¹ì‹œ ì§€ê¸ˆ ê°€ìž¥ í•„ìš”í•œ ê²Œ ë­ì˜ˆìš”?", 
                emotion: "shy",
                type: "keyword", // â˜… ì—¬ê¸°ê°€ í•µì‹¬! í‚¤ì›Œë“œ ìž…ë ¥ íƒ€ìž… ì§€ì •
                answers: {
                    "ì„ ë°°ë‹˜": { text: "ã…‹ã…‹ì €ë„ ì „ë¬¸ê°€ëŠ” ì•„ë‹ˆì§€ë§Œ... íŒ ì •ë„ëŠ” ì•Œë ¤ë“œë¦´ ìˆ˜ ìžˆì–´ìš”.", emotion: "happy", score: 10 },
                    "ë„ì›€": { text: "ã…‹ã…‹ì €ë„ ì „ë¬¸ê°€ëŠ” ì•„ë‹ˆì§€ë§Œ... íŒ ì •ë„ëŠ” ì•Œë ¤ë“œë¦´ ìˆ˜ ìžˆì–´ìš”.", emotion: "happy", score: 10 },
                    "ê°€ë¥´ì¹¨": { text: "ã…‹ã…‹ì €ë„ ì „ë¬¸ê°€ëŠ” ì•„ë‹ˆì§€ë§Œ... íŒ ì •ë„ëŠ” ì•Œë ¤ë“œë¦´ ìˆ˜ ìžˆì–´ìš”.", emotion: "happy", score: 10 }
                }
            }
                
            ],
            
            "ë¹„": [
                { text: "ë¹„ê°€ ì˜¤ë‹ˆ ë§ˆì„ì´ ì¡°ìš©í•˜ë„¤ìš”. ë¹—ì†Œë¦¬ ë“¤ìœ¼ë©´ì„œ ì—…ë¬´ ë³´ëŠ” ê²ƒë„ ì¢‹ì•„ìš”.", emotion: "default" },
                {
                    text: "ì£¼ë¡œ ì–´ë–¤ ìž¥ë¥´ì˜ ë…¸ëž˜ ë“¤ìœ¼ì„¸ìš”?",
                    emotion: "default",
                    type: "keyword",
                    answers: {
                        "íž™í•©": { text: "ì˜¤! ì§„ì§œìš”? ì €ë„ìš”. í˜¹ì‹œ ê´œì°®ìœ¼ë©´ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ê³µìœ í• ëž˜ìš”? R&Bë„ ì¢‹ì•„í•˜ì„¸ìš”?", emotion: "happy", score: 5 },
                        "í´ëž˜ì‹": { text: "ì°¨ë¶„í•´ì§€ê³  ì¢‹ì£ . ì§‘ì¤‘ ìž˜ ë  ê²ƒ ê°™ì•„ìš”.", emotion: "default", score: 3 },
                        "ë™ìš”": { text: "ë™ìš”ìš”? ã…‹ã…‹ã…‹ ê·€ì—¬ìš°ì‹œë„¤ìš”. ì˜ì™¸ë¡œ ížë§ ë ì§€ë„...", emotion: "happy", score: 5 }
                    }
                },
                { text: "ìš°ì‚° ì“°ê³  ë‹¤ë‹ˆì„¸ìš”. ê°ê¸° ê±¸ë¦¬ë©´ ë³¸ì¸ë§Œ ì†í•´ë‹ˆê¹Œìš”.", emotion: "default" },
                { 
                text: "ë¹„ ì˜¤ëŠ” ë‚ ì€ ìŠµê¸° ë•Œë¬¸ì— ì±… ê´€ë¦¬ê°€ ê¹Œë‹¤ë¡œì›Œìš”. ì œìŠµê¸°ë¼ë„ í•˜ë‚˜ ë” ë†”ì•¼ í•˜ë‚˜...", 
                emotion: "happy",
                choices: [
                    { label: "ì œê°€ ì¢€ ë„ì™€ë“œë¦´ê¹Œìš”?", score: 5, reply: "ì–´... ê´œì°®ìœ¼ì‹œê² ì–´ìš”? ê°ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒì— ì»¤í”¼ë¼ë„ í•œ ìž” ì‚´ê²Œìš”." },
                    { label: "ì—ê¶ã… ã…  ìˆ˜ê³ ê°€ ë§Žìœ¼ì‹œë„¤ìš”!", score: 0, reply: "ë­˜ìš”. ì œ ì¼ì´ë‹ˆê¹Œ ì—´ì‹¬ížˆ í•´ì•¼ì£ ." }
                ]
            },
                { 
                text: "ë¹„ê°€ ê³„ì† ì˜¤ë‹ˆê¹Œ ë”°ëœ»í•œ ê²Œ ë§ˆì‹œê³  ì‹¶ë„¤ìš”.", 
                emotion: "happy",
                choices: [
                    { label: "ì €ë„ìš”. ì•„ë©”ë¦¬ì¹´ë…¸ ë¨¹ê³  ì‹¶ì–´ìš”!", score: 5, reply: "ì˜¤, ì €ë„ ì•„ë©”ë¦¬ì¹´ë…¸ ìƒê°í•˜ê³  ìžˆì—ˆì–´ìš”. ì»¤í”¼ ì¢‹ì•„í•˜ì‹œëŠ”êµ¬ë‚˜." },
                    { label: "ì €ë„ìš”. ìºëª¨ë§ˆì¼ì°¨ ë¨¹ê³  ì‹¶ì–´ìš”!", score: 0, reply: "ê·¸ë ‡êµ¬ë‚˜. ìƒì ì— ì°¨ ì¢…ë¥˜ê°€ ê½¤ ë§Žì€ë° ë³´ì…¨ì–´ìš”?" },
                    { label: "ì €ë„ìš”. í•«ì´ˆì½” ë¨¹ê³  ì‹¶ì–´ìš”!", score: 3, reply: "ã…‹ã…‹ë‹¤ìŒì— ë£Œëž‘ ê°™ì´ íšŒê´€ ë†€ëŸ¬ì˜¤ì„¸ìš”. í•«ì´ˆì½” íƒ€ë“œë¦´ê²Œìš”." }
                ]
            },
            ],
            
            "ë²šê½ƒ": [
                [
                { text: "ìž ì‹œ ë¨¸ë¦¬ ì¢€ ì‹ížˆëŸ¬ ë‚˜ì™”ì–´ìš”. íšŒê´€ì—ë§Œ ìžˆìœ¼ë©´ ë‹µë‹µí•  ë•Œê°€ ìžˆì–´ì„œìš”.", emotion: "happy" },
                { text: "ë²šê½ƒ ë¹„ê°€ ì •ë§ ì˜ˆì˜ì£ ?", emotion: "default" }
                ],
                {
                    text: "ì†Œí’ ê°€ê³  ì‹¶ë„¤ìš”. ë¬¼ë¡  ìƒìƒë§Œ í•˜ëŠ” ê±°ì§€ë§Œ... ë§Œì•½ì— ë„ì‹œë½ ì‹¼ë‹¤ë©´ ë­ ë„£ê³  ì‹¶ì–´ìš”?", // í‚¤ì›Œë“œ
                    emotion: "happy",
                    type: "keyword",
                    answers: {
                        "ì½©êµ­ìˆ˜": { text: "ì˜¤! ì„¤íƒ•íŒŒì„¸ìš” ì†Œê¸ˆíŒŒì„¸ìš”? ì•ˆ ë§žìœ¼ë©´ ê°™ì´ ì†Œí’ ëª» ê°€ëŠ”ë°ã…‹ã…‹", emotion: "happy", score: 3 },
                        "ê¹€ì¹˜ë³¶ìŒë°¥": { text: "ì € ê¹€ì¹˜ë³¶ìŒë°¥ ì¢‹ì•„í•´ìš”. ìž˜ ë§Œë“œì„¸ìš”? ã…Žã…Ž", emotion: "love", score: 3 },
                        "ì¼€ì´í¬": { text: "ì¢‹ì£ . ì‚¬ì‹¤ ì € ë°¥ ëŒ€ì‹  ë””ì €íŠ¸ë§Œ ë¨¹ì–´ë„ ë¼ìš”ã…Žã…Ž", emotion: "happy", score: 3 },
                        "ë””ì €íŠ¸": { text: "ì¢‹ì£ . ì‚¬ì‹¤ ì € ë°¥ ëŒ€ì‹  ë””ì €íŠ¸ë§Œ ë¨¹ì–´ë„ ë¼ìš”ã…Žã…Ž", emotion: "happy", score: 3 },
                        "ë‘ì«€ì¿ ": { text: "ì–´? ë‘ì«‘ì¿ ? ì–´ë””ì„œ ì‚¬ì˜¤ê²Œìš”? í˜¹ì‹œ ë§Œë“¤ ì¤„ ì•„ì„¸ìš”? ìš°ì™€...", emotion: "happy", score: 5 },
                        "ë¹µ": { text: "ì¢‹ì£ . ì‚¬ì‹¤ ì € ë°¥ ëŒ€ì‹  ë””ì €íŠ¸ë§Œ ë¨¹ì–´ë„ ë¼ìš”ã…Žã…Ž", emotion: "happy", score: 3 }
                    }
                },
                { 
                text: "(ë–¨ì–´ì§€ëŠ” ë²šê½ƒìžŽì„ ìž¡ìœ¼ë ¤ë‹¤ ë†“ì¹œë‹¤) ì•„... ì‰½ì§€ ì•Šë„¤ìš”.", 
                emotion: "happy",
                choices: [
                    { label: "ë¬´ìŠ¨ ì†Œì› ë¹„ì‹œë ¤ê³ ìš”?ã…Žã…Ž", score: 3, reply: "ìŒ... ë” ë‚˜ì€ ì‚¬ëžŒì´ ë˜ê²Œ í•´ë‹¬ë¼ê³ ìš”." },
                    { label: "ì•„ ê·¸ê±° ê·¸ë ‡ê²Œ í•˜ëŠ” ê±° ì•„ë‹Œë°", score: 0, reply: "ë„¤? ê·¸ëŸ¼ ë­ ì–´ë–»ê²Œ í•´ì•¼í•˜ì£ ..." },
                    { label: "(ë²šê½ƒìžŽì„ í•˜ë‚˜ ìž¡ì•„ ê±´ë„¨ë‹¤.)", score: 5, reply: "ì–´... ì € ì£¼ì‹œëŠ” ê±°ì˜ˆìš”? ê°ì‚¬í•©ë‹ˆë‹¤. {user} ë‹˜ë„ ê°™ì´ ì†Œì› ë¹Œì–´ìš”." }
                ]
            }
            ]
        },
        
        mid: { // 30~69ì 
            "ë§‘ìŒ": [
                { text: "ì™”ì–´ìš”? ë§ˆì¹¨ ì‹¬ì‹¬í–ˆëŠ”ë° ìž˜ëë‹¤. ì €ëž‘ ìž ê¹ ë†ë•¡ì´... ì•„ë‹ˆ, íœ´ì‹ ì¢€ ì·¨í• ëž˜ìš”?", emotion: "happy" },
                { 
                text: "ì˜¤ëŠ˜ë”°ë¼ ì¼ì´ ì†ì— ì•ˆ ìž¡ížˆë„¤ìš”. ìžê¾¸ ë”´ìƒê°ì´ ë“¤ì–´ì„œ.", 
                emotion: "happy",
                choices: [
                    { label: "ë¬´ìŠ¨ ìƒê° í•˜ëŠ”ë°ìš”?", score: 3, reply: "ìŒ... ê·¸ëƒ¥ ë§›ìžˆëŠ” ê±° ë¨¹ê³  ì‹¶ë‹¤ëŠ” ìƒê°? í€¸ì•„ë§ì— ì•„ì•„ë¼ë˜ê°€." },
                    { label: "ì–´í—ˆ. ì§‘ì¤‘ë ¥ ë¶€ì¡±.", score: 0, reply: "ìœ¼... íŒ©íŠ¸í­ë ¥ ë„ˆë¬´ ì•„í”ˆë°ìš”." },
                    { label: "ê·¸ëŸ° ë‚ ì€ ê·¸ëƒ¥ í‘¹ ì‰¬ê±°ë‚˜ ë…¸ëŠ” ê²ƒë„ ë°©ë²•ì´ì—ìš”!", score: 5, reply: "ì˜¤... ì´ë„ì €ë„ ì•„ë‹Œ ê²ƒë³´ë‹¨ ê·¸ê²Œ ë‚«ê² ë„¤ìš”. ê·¼ë° ì €ëž‘ ë†€ì•„ì£¼ì‹¤ ê±°ì˜ˆìš”?" }
                ]
                },
                { 
                text: "ì € ë°©ê¸ˆ ìŠ¤íƒ€ì£¼ì  ë‹¤ë…€ì™”ëŠ”ë° ë­ ìƒ€ê²Œìš”?", 
                emotion: "shy",
                type: "keyword", // â˜… ì—¬ê¸°ê°€ í•µì‹¬! í‚¤ì›Œë“œ ìž…ë ¥ íƒ€ìž… ì§€ì •
                answers: {
                    "ì•„ë©”ë¦¬ì¹´ë…¸": { text: "ã…Žã…Žë§žì•„ìš”. í•œ ëª¨ê¸ˆ ë“œì‹¤ëž˜ìš”?", emotion: "happy", score: 5 },
                    "ì•„ì•„": { text: "ã…Žã…Žë§žì•„ìš”. í•œ ëª¨ê¸ˆ ë“œì‹¤ëž˜ìš”?", emotion: "happy", score: 5 },
                    "ì»¤í”¼": { text: "ã…Žã…Žë§žì•„ìš”. í•œ ëª¨ê¸ˆ ë“œì‹¤ëž˜ìš”?", emotion: "happy", score: 5 }
                }
                }
            ],
            "ë¹„": [
                { text: "ë¹„ ì˜¤ë‹ˆê¹Œ íŒŒì „ì— ë§‰ê±¸... ì•„ë‹ˆ, ë”°ëœ»í•œ ì»¤í”¼ í•œ ìž” í•˜ê³  ì‹¶ë„¤ìš” ã…Žã…Ž", emotion: "happy" },
                { text: "...ì¢€ ì „ì— ì²œë‘¥ì¹  ë•Œ ì œ ìª½ ì•ˆ ë³´ì…¨ì£ ? ëª» ë´¤ë‹¤ê³  í•´ì£¼ì„¸ìš”.", emotion: "happy" }
            ],
            "ë²šê½ƒ": [
                { text: "ì˜›ë‚ ì—” ì—¬ê¸°ì„œ ìˆ¨ë°”ê¼­ì§ˆí•˜ê³  ë†€ì•˜ëŠ”ë°. ì € ê½¤ ìž˜ ìˆ¨ì–´ìš”. ì°¾ì•„ë³¼ëž˜ìš”?", emotion: "happy" },
                { text: "ì–´, ë¨¸ë¦¬ì— ê½ƒìžŽ ë¶™ì—ˆë‹¤. ...ê°€ë§Œížˆ ìžˆì–´ë´ìš”.", emotion: "happy" },
                {
                    text: "ì—¬ê¸° ì„œ ìžˆì–´ ë´ìš”. ë°°ê²½ì´ ì˜ˆë»ì„œ ì‚¬ì§„ ì°ì–´ ë“œë¦´ê²Œìš”.", // ì„ íƒì§€
                    emotion: "default",
                    choices: [
                        { label: "ê¹€ì¹˜~ (ë¸Œì´ í•œë‹¤)", score: 0, reply: "ã…‹ã…‹ìžì—°ìŠ¤ëŸ½ê²Œ ìž˜ ë‚˜ì™”ë„¤ìš”. ë³´ë‚´ë“œë¦´ê²Œìš”." },
                        { label: "ì‹œì˜¨ ì”¨ë„ ê°™ì´ ì°ì–´ìš”!", score: 5, reply: "ë„¤? ì €ìš”? ì•„... ì „ ì‚¬ì§„ ìž˜ ì•ˆ ì°ëŠ”ë°... ê·¸ëž˜ë„ ì˜¤ëŠ˜ì€ ë²šê½ƒì´ ìœ ë‚œížˆ ì˜ˆì˜ë‹ˆê¹Œ í•œ ìž¥ ë‚¨ê²¨ì•¼ê² ë„¤ìš”." }
                    ]
                },
            ]
        },
        high: { // 70ì  ì´ìƒ
            "ë§‘ìŒ": [
                { text: "ì˜¤ì…¨ì–´ìš”? ì•ˆ ì˜¤ë©´ ì„­ì„­í•  ë»”í–ˆëŠ”ë°.", emotion: "love" },
                { text: "ë‚´ì¼ë„ ë‚ ì”¨ ë§‘ëŒ€ìš”. ë‚´ì¼ë„... íšŒê´€ ë“¤ëŸ¬ì£¼ì‹¤ ê±°ì£ ?", emotion: "love" },
                {
                    text: "ì €ê¸° ê·¼ë°... í˜¸ì¹­ì„ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œìš”? ë†ìž¥ì£¼ë‹˜ì€ ë„ˆë¬´ ë”±ë”±í•´ì„œ. ê·¸ëƒ¥ ì´ë¦„ì´ ì¢‹ì„ê¹Œìš”?", // í‚¤ì›Œë“œ
                    emotion: "shy",
                    type: "keyword",
                    answers: {
                        "ëˆ„ë‚˜": { text: "ëˆ„... ëˆ„ë‚˜ìš”? ìŒ... ë…¸ë ¥ì€ í•´ë³¼ê²Œìš”. ì–´... {user} ëˆ„...ë‚˜.", emotion: "shy", score: 10 },
                        "ìžê¸°": { text: ".......ë„¤? ìž˜ëª» ë§ì”€í•˜ì‹  ê±°ì£ ? ê¿ˆì¸ê°€... (ì–´ì§¸ì„œì¸ì§€ ê·€ëì´ ë¶‰ë‹¤)", emotion: "shy", score: 3 },
                        "ì—¬ë³´": { text: ".......ë„¤? ìž˜ëª» ë§ì”€í•˜ì‹  ê±°ì£ ? ê¿ˆì¸ê°€... (ì–´ì§¸ì„œì¸ì§€ ê·€ëì´ ë¶‰ë‹¤)", emotion: "shy", score: 3 },
                        "í—ˆë‹ˆ": { text: ".......ë„¤? ìž˜ëª» ë§ì”€í•˜ì‹  ê±°ì£ ? ê¿ˆì¸ê°€... (ì–´ì§¸ì„œì¸ì§€ ê·€ëì´ ë¶‰ë‹¤)", emotion: "shy", score: 3 },
                        "ì• ê¸°": { text: ".......ë„¤? ìž˜ëª» ë§ì”€í•˜ì‹  ê±°ì£ ? ê¿ˆì¸ê°€... (ì–´ì§¸ì„œì¸ì§€ ê·€ëì´ ë¶‰ë‹¤)", emotion: "shy", score: 3 },
                        "ê³µì£¼": { text: "ã…‹ã…‹ã…‹ ë¶ˆëŸ¬ë“œë¦´ ìˆ˜ëŠ” ìžˆëŠ”ë° ê°ë‹¹ ê°€ëŠ¥í•˜ì„¸ìš”? {user} ê³µì£¼ë‹˜?", emotion: "shy", score: 7 },
                        "ì´ë¦„": { text: "ì—­ì‹œ ì´ë¦„ì´ ì œì¼ ë¬´ë‚œí•˜ì£ . ê·¸ëŸ¼ {user} ë‹˜ì´ë¼ê³  ë¶€ë¥¼ê²Œìš”.", emotion: "happy", score: 0 }
                    }
                },
                {
                    text: "ì˜¤ëŠ˜ ì¼ì° í‡´ê·¼í•  ê²ƒ ê°™ì€ë°... í˜¹ì‹œ ì €ë…ì— ë­ í•˜ì„¸ìš”?", // ì„ íƒì§€
                    emotion: "happy",
                    choices: [
                        { label: "ì‹œì˜¨ ì”¨ëž‘ ë†€ì•„ì•¼ì£ !", score: 5, reply: "ã…Žã…Žê·¸ëŸ´ëž˜ìš”? ë§›ìžˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ìš”." },
                        { label: "ê³ ë¯¼ ì¤‘ì´ì—ìš”", score: 0, reply: "ê³ ë¯¼ ì¤‘ì´ë©´... ì €ëž‘ ì €ë… ë“œì‹¤ëž˜ìš”?" },
                        { label: "ì¡¸ë ¤ì„œ í‘¸ë°í‘¸ë° ìž˜ ê±°ì˜ˆìš©", score: 3, reply: "? ë„¤? í‘¸ë°í‘¸ë°... ê°€ ë­”ì§€ ëª¨ë¥´ê² ì§€ë§Œ...ã…‹ã…‹ ì–´ê°ì´ ê·€ì—½ë„¤ìš”. ê·¸ëŸ¼ í‘¹ ì£¼ë¬´ì„¸ìš”." }
                    ]
                }
            ],
            ],
            "ë¹„": [
                {
                    text: "(ìž‘ê²Œ í•˜í’ˆì„ í•œë‹¤) ìœ¼... ì–´ì œ ëŠ¦ê²Œ ìž¤ë”ë‹ˆ ì¢€ ì¡¸ë¦¬ë„¤ìš”.", // ì„ íƒì§€
                    emotion: "default",
                    choices: [
                        { label: "ì œ ì–´ê¹¨ ë¹Œë ¤ë“œë¦´ê¹Œìš”?", score: 3, reply: "ì–´... ì§„ì‹¬ì´ì—ìš”? ì € ì§„ì§œ ê¸°ëŒ€ìš”? ë¬´ê±°ìš¸ í…ë°ã…‹ã…‹" },
                        { label: "(ì–¼êµ´ ì•žì— ë°•ìˆ˜ë¥¼ ì§ ì¹˜ë©°) ì •ì‹  ì°¨ë¦¬ì‹­ì‡¼ ê´€ë¦¬ìžë‹˜!", score: 0, reply: "ì•„ ã…‹ã…‹ã…‹ ê¹œì§ì´ì•¼. ë•ë¶„ì— ìž  í™• ê¹¼ë„¤ìš”. ê³ ë§ˆì›Œìš”." }
                    ]
                }
            ],
            "ë²šê½ƒ": [
                {
                    text: "ë‚˜ì¤‘ì— ì€í‡´í•˜ë©´ ì–´ë””ì„œ ì‚´ê³  ì‹¶ì–´ìš”?",
                    emotion: "happy",
                    type: "keyword",
                    answers: {
                        "ì‹œê³¨": { text: "ì €ëˆë°. í•œì í•œ ê³³ì—ì„œ ì¢‹ì•„í•˜ëŠ” ì‚¬ëžŒë“¤ì´ëž‘... ìƒê°ë§Œ í•´ë„ ì¢‹ë„¤ìš”.", emotion: "happy", score: 5 },
                        "ë°”ë‹¤": { text: "ì €ë„ìš”! ì‚¬ì‹¤ ê³ í–¥ì´ ë°”ë‹·ê°€ ë§ˆì„ì´ê±°ë“ ìš”. ...ë‹¤ìŒì— {user} ë‹˜ë„ ì´ˆëŒ€í•˜ê³  ì‹¶ì–´ìš”.", emotion: "happy", score: 5 },
                        "ë°”ë‹·ê°€": { text: "ì €ë„ìš”! ì‚¬ì‹¤ ê³ í–¥ì´ ë°”ë‹·ê°€ ë§ˆì„ì´ê±°ë“ ìš”. ...ë‹¤ìŒì— {user} ë‹˜ë„ ì´ˆëŒ€í•˜ê³  ì‹¶ì–´ìš”.", emotion: "happy", score: 5 },
                        "ë„ì‹œ": { text: "ë„ì‹œë¼... íŽ¸ë¦¬í•˜ê¸´ í•˜ì£ . ì „ ê·¸ëž˜ë„ ì—¬ê¸°ê°€ ë” ì¢‹ì€ ê²ƒ ê°™ì•„ìš”.", emotion: "default", score: 3 },
                        "ë„ˆëž‘": { text: "...! ê·¸ëŸ° ë©˜íŠ¸ëŠ” ì–´ë””ì„œ ë°°ìš°ì‹œëŠ” ê±°ì˜ˆìš”...", emotion: "love", score: 15 },
                        "ì‹œì˜¨": { text: "...! ê·¸ëŸ° ë©˜íŠ¸ëŠ” ì–´ë””ì„œ ë°°ìš°ì‹œëŠ” ê±°ì˜ˆìš”...", emotion: "love", score: 15 }
                    }
                },
            ]
        }
    },
    
    // ë¦¬ì¿  ì˜ˆì‹œ (ë‚˜ë¨¸ì§€ ë©¤ë²„ë„ ê°™ì€ êµ¬ì¡°ë¡œ ì¶”ê°€)
    riku:
    {
        low: {
            "ë§‘ìŒ": [{ text: "ì•ˆëƒì„¸ì—¬!", emotion: "default" }],
            "ë¹„": [{ text: "ë¹„ ì‹œëŸ¬ì—¬.. ì¶•ì¶•í•´..", emotion: "sad" }],
            "ë²šê½ƒ": [{ text: "ë¶„í™ìƒ‰ ëˆˆì´ ë‚´ë ¤ì—¬!", emotion: "happy" }]
        },
        mid: {
            "ë§‘ìŒ": [
                [
                    { text: "ëˆ„ë‚˜ëˆ„ë‚˜! ì €ê¸° ë´ë°”ì—¬!", emotion: "shock" },
                    { text: "ê°œë¯¸ê°€ ì§€ë‚˜ê°€ì—¬!!", emotion: "happy" }
                ]
            ],
            "ë¹„": [{ text: "ëˆ„ë‚˜ ìš°ì‚° ê°™ì´ ì¨ë„ ëŒ€ì—¬?", emotion: "shy" }],
            "ë²šê½ƒ": [{ text: "ëˆ„ë‚˜ ë¨¸ë¦¬ì— ê½ƒìžŽ ë¶™ì–´ì¨ì—¬! í—¤í—¤", emotion: "happy" }]
        },
        high: {
            "ë§‘ìŒ": [{ text: "ëˆ„ë‚˜! ë¦¬ì¿ ê°€ ì„¸ìƒì—ì„œ ì ¤ ì¡°ì•„í•´!!", emotion: "happy" }],
            "ë¹„": [{ text: "ë¹„ ì™€ë„ ëˆ„ë‚˜ëž‘ ìžˆìœ¼ë©´ ì£ ì•„!", emotion: "happy" }],
            "ë²šê½ƒ": [{ text: "ë‚˜ëž‘ í‰ìƒ ê½ƒë†€ì´ ê°™ì´ ê°€ì—¬ ì•½ì†!", emotion: "happy" }]
        }
    },

    yushi: {
        very_low: {
            "ë§‘ìŒ": [
                { text: "ì—.. ì˜¤ëŠ˜ì€ êµ¬ë¦„ ëª¨ì–‘ì´ ê¼­ ë¶•ì–´ë¹µ ê°™ë„¤ìš” ~", emotion: "happy" },
                { 
                text: "ë†ìž¥ì£¼ ë‹˜ì˜ ë†ìž¥ì—ëŠ” ê·€ì—¬ìš´ ê²Œ ë§Žì§€ìš” ?", 
                emotion: "happy",
                choices: [
                    { label: "ì–´ë–¤ ê±°ìš”? í—ˆìˆ˜ì•„ë¹„?", score: 3, reply: "ë„¤ ! ê·¼ë° ë‚®ì—ëŠ” ê´œì°®ì€ë° ë°¤ì— ë³´ë©´ ì¢€ ë¬´ì„œì›Œìš”.." },
                    { label: "ì–´ë–¤ ê±°ìš”? íŠ¸ëž™í„°?", score: 5, reply: "ì—.. ê¸°ê³„ëŠ” ì¢€ ì‹œë„ëŸ¬ì›Œì„œ.. ì €ëŠ” ë³„ë¡œ ì•ˆ ì¢‹ì•„í•´ìš”." },
                    { label: "ì–´ë–¤ ê±°ìš”? ë™ë¬¼?", score: 0, reply: "ë§žì•„ìš” ! íŠ¹ížˆ í•˜ì–€ìƒ‰ ê¼¬ê¼¬ê°€ ì•„ì£¼ ê·€ì—¬ì›Œìš” ^_^ ì´ë¦„ì´ ìžˆë‚˜ìš” ?" }
                ]
                }
            ],
            
            "ë¹„": [
                { text: "ë¹„ ëƒ„ìƒˆê°€ ì¢‹ì§€ìš” ? í™ëƒ„ìƒˆë„ ë‚˜ê³ ..", emotion: "happy" },
                {
                    text: "ë¹„ ì˜¤ëŠ” ë‚ ì—ëŠ” ë­˜ í•˜ëŠ” ê²Œ ì œì¼ ì¢‹ì„ê¹Œìš” ?", // í‚¤ì›Œë“œ
                    emotion: "default",
                    type: "keyword",
                    answers: {
                        "ë‚®ìž ": { text: "ì¢‹ì£  ! ë¹—ì†Œë¦¬ ë“¤ìœ¼ë©´ì„œ ìžë©´ ê¿€ë§›ì´ì§€ìš” ~", emotion: "happy", score: 3 },
                        "ì‚°ì±…": { text: "ì—.. ì‚°ì±….. ì¢‹ì§€ë§Œ ì˜·ì´ ì –ì§€ ì•Šì„ê¹Œìš” ?", emotion: "happy", score: 0 },
                        "íŒŒì „": { text: "ì™€ ! í†µí–ˆì–´ìš” ! íŒŒì „ì„ ë¶€ì¹˜ëŠ” ì†Œë¦¬ê°€ ê¼­ ë¹—ì†Œë¦¬ ê°™ìœ¼ë‹ˆê¹Œìš” ^_^ ì—... ë°°ê³ íŒŒì¡Œë‹¤... ë¹„ ì˜¤ëŠ” ë‚ ë§ˆë‹¤ ì£¼ì ì— íŒŒì „ì„ íŒŒëŠ”ë° ê°™ì´ ë¨¹ìœ¼ëŸ¬ ê°€ì‹¤ëž˜ìš” ?", emotion: "default", score: 3 }
                    }
                },
                {
                    text: "ì¶•ì¶•í•´ì„œ í„¸ì´.. ì˜·ì´ ì –ëŠ” ê±´ ì¢€ ì‹«ë„¤ìš”.",
                    emotion: "sad",
                    choices: [
                        { label: "ë°©ê¸ˆ í„¸ì´ë¼ê³  í•˜ì…¨ì–´ìš”?", score: 0, reply: "ì—..? ìž˜ëª» ë“¤ìœ¼ì‹  ê±° ì•„ë‹ˆì—ìš” ? ^_^;;" },
                        { label: "ìš°ì‚° ê°™ì´ ì“°ì‹¤ëž˜ìš”?", score: 3, reply: "ê°ì‚¬í•´ìš” ! ë•ë¶„ì— ì•ˆ ì –ê² ë„¤ìš” ! ë†ìž¥ì£¼ ë‹˜ì€ ì²œì‚¬ ê°™ì•„ìš”~" }
                    ]
                }
            ],
            
            "ë²šê½ƒ": [
                { text: "ê½ƒìžŽ ìž¡ìœ¼ë ¤ê³  í–ˆëŠ”ë°.. ë†“ì³¤ì–´ìš”.", emotion: "sad" },
                {
                    text: "ì €ëŠ” í•˜ëŠ˜ìƒ‰ì„ ë³´ë©´ ê¸°ë¶„ì´ ì¢‹ì•„ì ¸ìš”. ë†ìž¥ì£¼ ë‹˜ì€ ë¬´ìŠ¨ ìƒ‰ ì¢‹ì•„í•˜ì„¸ìš” ?", // í‚¤ì›Œë“œ
                    emotion: "happy",
                    type: "keyword",
                    answers: {
                        "ë¶„í™": { text: "ë¶„í™ ! ë²šê½ƒì„ ë‹®ì•„ ì´ì˜ì§€ìš” ~", emotion: "default", score: 3 },
                        "í•˜ëŠ˜": { text: "ì™€ ! ì €ëž‘ ë˜‘ê°™ë„¤ìš” ! ì°Œì°Œë½• ðŸ˜™ ë²šê½ƒë„ í•˜ëŠ˜ìƒ‰ì´ë©´ ì¢‹ê² ì–´ìš” ~", emotion: "love", score: 5 },
                        "ì´ˆë¡": { text: "ìˆ²ì´ëž‘ ê°™ì€ ìƒ‰ì´ë„¤ìš”. íŽ¸ì•ˆí•œ ëŠë‚Œì´ë¼ ì¢‹ì•„ìš” ^_^", emotion: "happy", score: 3 }
                    }
                }
            ]
        },
        
        low: {
            "ë§‘ìŒ": [
                { text: "ì— ! ì‹ ê¸°í•´ìš”. ë§ˆì¹¨ {user} ë‹˜ì´ ì™€ì¤¬ìœ¼ë©´ ì¢‹ê² ë‹¤ ìƒê°í•˜ê³  ìžˆì—ˆëŠ”ë° ~", emotion: "happy" },
                {
                    text: "í˜¹ì‹œ ë…¸ëž˜ ë“£ëŠ” ê±° ì¢‹ì•„í•˜ì„¸ìš” ?", // í‚¤ì›Œë“œ
                    emotion: "shy",
                    type: "keyword",
                    answers: {
                        "íŒì†¡": { text: "ì˜¤ ~ íŒì†¡ ì¢‹ì§€ìš”. ì €ë„ ìžì£¼ ë“¤ì–´ìš” !", emotion: "happy", score: 5 },
                        "ë°œë¼ë“œ": { text: "ê°ì„±ì ì´ì‹œë„¤ìš” ~ ë¹„ ì˜¤ëŠ” ë‚  ë“¤ìœ¼ë©´ ë”±ì´ê² ì–´ìš” !", emotion: "default", score: 3 },
                        "ì—‘ì†Œ": { text: "ì—..?! ì—‘ì†Œë¥¼ ì•„ì„¸ìš” ? ì € ì™„ì „ íŒ¬ì¸ë° ! ðŸ˜™ ìµœì• ê°€ ëˆ„êµ¬ì„¸ìš” ?", emotion: "love", score: 10 }
                    }
                },
                {
                    text: "ë°°ê³ í”„ì§€ ì•Šìœ¼ì„¸ìš” ? í‘¸ë”©ì´ í•˜ë‚˜ ìžˆê¸´ í•œë°..", // ì„ íƒì§€
                    emotion: "default",
                    choices: [
                        { label: "ìœ ìš°ì‹œ ë¨¹ì–´ìš”~ ë‚œ ê´œì°®ì•„.", score: 5, reply: "ì—.. ì§„ì§œìš” ? ê·¸ëŸ¼ ì œê°€ ë‹¤ ë¨¹ì„ê²Œìš” ! ìž˜ ë¨¹ê² ìŠµë‹ˆë‹¤ ~^_^" },
                        { label: "ì˜¤! ë¨¹ì„ëž˜ìš”!", score: 3, reply: "ì•„.. ê·¼ë° ì €ë„ ë¨¹ì–´ì•¼ í•´ì„œ ! ë°˜ë§Œ ë“œë¦´ê²Œìš”. ë°˜ë§Œ !" }
                    ]
                }
            ],
            
            "ë¹„": [
                { text: "ìš°ì‚° ì•ˆ ê°€ì ¸ì™”ì–´ìš” ? ì—.. ì œ ê±° ê°™ì´ ì“°ì‹¤ëž˜ìš” ? ì¡°ê¸ˆ ì¢ê¸´ í•˜ì§€ë§Œ..", emotion: "shy" },
                {
                    text: "ë¹„ê°€ ì˜¤ë‹ˆê¹Œ ì˜›ë‚  ìƒê°ì´ ë‚˜ë„¤ìš”. ì¶”ì–µì€ ì†Œì¤‘í•œ ê±°ì§€ìš” ?", // í‚¤ì›Œë“œ
                    emotion: "default",
                    type: "keyword",
                    answers: {
                        "ì†Œì¤‘": { text: "ê·¸ëž—ì£  ! ì§€ë‚˜ê°„ ì‹œê°„ì€ ë‹¤ì‹œ ëŒì•„ì˜¤ì§€ ì•Šìœ¼ë‹ˆê¹Œìš” ^_^", emotion: "happy", score: 5 },
                        "ì‘": { text: "ê·¸ëž—ì£  ! ì§€ë‚˜ê°„ ì‹œê°„ì€ ë‹¤ì‹œ ëŒì•„ì˜¤ì§€ ì•Šìœ¼ë‹ˆê¹Œìš” ^_^", emotion: "happy", score: 5 },
                        "ë‹¹ì—°": { text: "ê·¸ëž—ì£  ! ì§€ë‚˜ê°„ ì‹œê°„ì€ ë‹¤ì‹œ ëŒì•„ì˜¤ì§€ ì•Šìœ¼ë‹ˆê¹Œìš” ^_^", emotion: "happy", score: 5 },
                        "ë§žì•„": { text: "ê·¸ëž—ì£  ! ì§€ë‚˜ê°„ ì‹œê°„ì€ ë‹¤ì‹œ ëŒì•„ì˜¤ì§€ ì•Šìœ¼ë‹ˆê¹Œìš” ^_^", emotion: "happy", score: 5 },
                        "ê·¸ë‹¥": { text: "ì—.. ë„ˆë¬´ ì‚­ë§‰í•œ ê±° ì•„ë‹ˆì—ìš” ? ë‚­ë§Œì´ ì—†ìœ¼ì‹œë„¤ !", emotion: "sad", score: 0 },
                        "ë³„ë¡œ": { text: "ì—.. ë„ˆë¬´ ì‚­ë§‰í•œ ê±° ì•„ë‹ˆì—ìš” ? ë‚­ë§Œì´ ì—†ìœ¼ì‹œë„¤ !", emotion: "sad", score: 0 },
                        "ê¸€ìŽ„": { text: "ì—.. ë„ˆë¬´ ì‚­ë§‰í•œ ê±° ì•„ë‹ˆì—ìš” ? ë‚­ë§Œì´ ì—†ìœ¼ì‹œë„¤ !", emotion: "sad", score: 0 },
                        "ì•„ë‹ˆ": { text: "ì—.. ë„ˆë¬´ ì‚­ë§‰í•œ ê±° ì•„ë‹ˆì—ìš” ? ë‚­ë§Œì´ ì—†ìœ¼ì‹œë„¤ !", emotion: "sad", score: 0 }
                    }
                },
               {
                    text: "ë¹—ì†Œë¦¬ê°€ ê¼­ í”¼ì•„ë…¸ ì¹˜ëŠ” ì†Œë¦¬ ê°™ì§€ ì•Šì•„ìš” ?", // ì„ íƒì§€
                    emotion: "happy",
                    choices: [
                        { label: "ê°ìˆ˜ì„±ì´ í’ë¶€í•˜ì‹œë„¤ìš”!", score: 3, reply: "ê·¸ëŸ°ê°€ìš” ? ^_^ ì €ëŠ” ê·¸ëƒ¥ ë“¤ë¦¬ëŠ” ëŒ€ë¡œ ë§í•œ ê±´ë° ~" },
                        { label: "ê·¸ëƒ¥ ë¬¼ ë–¨ì–´ì§€ëŠ” ì†Œë¦¬ ê°™ì€ë°ìš”!", score: 0, reply: "ì—.. ìž¬ë¯¸ì—†ì–´." }
                    ]
                }
            ],
            
            "ë²šê½ƒ": [
                { text: "ê½ƒìžŽì´ ë¨¸ë¦¬ì— ë¶™ì—ˆì–´ìš”. ê·¸ì¹˜ë§Œ ë–¼ì£¼ì§€ ì•Šì„ ê±°ì˜ˆìš” ! ì˜ˆì˜ë‹ˆê¹Œ ðŸ˜™", emotion: "happy" },
                {
                    text: "ë„ì‹œë½ ì‹¸ ì™”ëŠ”ë° ê°™ì´ ë¨¹ì„ëž˜ìš” ? ë©”ë‰´ëŠ” ë¹„ë°€ì´ì§€ìš” ~", // í‚¤ì›Œë“œ
                    emotion: "happy",
                    type: "keyword",
                    answers: {
                        "ê¹€ë°¥": { text: "ë•¡ ! í‹€ë ¸ìŠµë‹ˆë‹¤ ~ ì •ë‹µì€ ìœ ë¶€ì´ˆë°¥ì´ì§€ìš” ðŸ˜™", emotion: "happy", score: 3 },
                        "ì´ˆë°¥": { text: "ì˜¤ ! ë¹„ìŠ·í•´ìš”. ìœ ë¶€ì´ˆë°¥ ì‹¸ ì™”ê±°ë“ ìš”. í•˜ë‚˜ ë“œë¦´ê¹Œìš” ?", emotion: "happy", score: 5 }
                    }
                },
                {
                    text: "ì‚¬ì§„ ì°ê³  ì‹¶ë‹¤..", // ì„ íƒì§€
                    emotion: "default",
                    choices: [
                        { label: "ì œê°€ ì°ì–´ë“œë¦´ê¹Œìš”?", score: 0, reply: "ì¢‹ì•„ìš” ! ì˜ˆì˜ê²Œ ì°ì–´ì£¼ì„¸ìš” ~" },
                        { label: "ê°™ì´ ì°ì–´ìš” ìš°ë¦¬!", score: 5, reply: "ì—.. ê°™ì´ìš” ? ìŒ.. ì¢‹ì•„ìš” ^_^ ì¶”ì–µ í•˜ë‚˜ ì €ìž¥ !" }
                    ]
                }
            ]
        },
        
        mid: { // 30~69ì 
            "ë§‘ìŒ": [

                    ],
            "ë¹„": [
                
                    ],
            "ë²šê½ƒ": [
            
                    ]
        },
        
        high: { // 70ì  ì´ìƒ
            "ë§‘ìŒ": [

            ],
            "ë¹„": [
                
            ],
            "ë²šê½ƒ": [
            ]
        }
    },    

    
    // ìœ ìš°ì‹œ, ìž¬í¬, ë£Œ, ì‚¬ì¿ ì•¼ë„ ìœ„ì™€ ë˜‘ê°™ì€ êµ¬ì¡°(low/mid/high -> ë§‘ìŒ/ë¹„/ë²šê½ƒ)ë¡œ ë§Œë“œì‹œë©´ ë©ë‹ˆë‹¤.
};

// â˜… 2. í˜¸ê°ë„ ë‹¬ì„± ì´ë²¤íŠ¸ (íŠ¹ì • ì ìˆ˜ ë„ë‹¬ ì‹œ 1íšŒ ë°œë™)
const affinityEvents = {
    sion: [
        {
            id: "sion_event_30", // ì´ë²¤íŠ¸ ê³ ìœ  ID
            threshold: 30,       // ë°œë™ ì¡°ê±´ í˜¸ê°ë„
            bg: "assets/images/backgrounds/forest.png", // ì´ë²¤íŠ¸ ë°°ê²½ (ì›í•˜ëŠ” ì´ë¯¸ì§€ ê²½ë¡œ)
            script: [
                { text: "(ì‹œì˜¨ì´ ìˆ²ì†ì—ì„œ í˜¼ìž ë¬´ì–¸ê°€ë¥¼ ë³´ê³  ìžˆë‹¤.)", emotion: "default" },
                { text: "ì•„, ë†ìž¥ì£¼ë‹˜. ì˜¤ì…¨êµ°ìš”.", emotion: "happy" },
                { text: "ì‚¬ì‹¤ ì—¬ê¸°ì„œë§Œ ë³´ì´ëŠ” í¬ê·€í•œ ê½ƒì„ ì°¾ê³  ìžˆì—ˆì–´ìš”.", emotion: "default" },
                { text: "ë‹¹ì‹ ì—ê²Œ ë³´ì—¬ì£¼ê³  ì‹¶ì—ˆê±°ë“ ìš”.", emotion: "happy" }
            ]
        }
    ],
    riku: [
        {
            id: "riku_event_50",
            threshold: 50,
            bg: "assets/images/backgrounds/shop.png",
            script: [
                { text: "ëˆ„ë‚˜! ì´ê±° ë´ë°”ì—¬! ë¦¬ì¿ ê°€ ì•„ê¼ˆë˜ ì‚¬íƒ•ì¸ë° ëˆ„ë‚˜ ì¤„ê²Œì—¬!", emotion: "happy" },
                { text: "(ë¦¬ì¿ ì˜ ì†Œì¤‘í•œ ì‚¬íƒ•ì„ ë°›ì•˜ë‹¤...)", emotion: "default" }
            ]
        }
    ]
};

// 3. ìž¥ì†Œ ë° ë ˆì‹œí”¼ ë°ì´í„°
const locations = {
    farm: { name: "ë†ìž¥", bg: "assets/images/backgrounds/farm.png", items: ["ìˆ˜ì„ í™”", "í™", "ë”¸ê¸°"] },
    square: { name: "ë§ˆì„ ê´‘ìž¥", bg: "assets/images/backgrounds/square.png", items: ["ìˆ˜ì„ í™”", "ë¯¼ë“¤ë ˆ", "ë¦¬ëª¨ì»¨", "ì—ë„ˆì§€ ë“œë§í¬", "í™"] },
    forest: { name: "ë¹„ë°€ì˜ ìˆ²", bg: "assets/images/backgrounds/forest.png", items: ["ìŠ¤íƒ€í‘¸ë¥´íŠ¸", "ë¸”ë£¨ ìž¬ì¦ˆ", "ë¸”ë¡­í”¼ì‰¬", "ë”¸ê¸°", "ë„í† ë¦¬", "í™"] },
    shop: { name: "í”¼ì—ë¥´ ìƒì ", bg: "assets/images/backgrounds/shop.png", items: ["ì„¤íƒ•", "ì¹˜ì¦ˆ", "ë°€ê°€ë£¨", "ë‹¬ê±€"] },
    hall: { name: "ë§ˆì„ íšŒê´€", bg: "assets/images/backgrounds/hall.png", items: ["ì—ë„ˆì§€ ë“œë§í¬", "ì´ˆì½”ì¼€ì´í¬", "í™"] },
    saloon: { name: "ë³„ë¹› ì£¼ì ", bg: "assets/images/backgrounds/saloon.png", items: ["ë”¸ê¸° ë¹µ", "í–‰ìš´ì˜ ì ì‹¬", "ì´ˆì½”ì¼€ì´í¬", "ì»¤í”¼"] }
};

const recipes = [
    { ingredients: ["ë°€ê°€ë£¨", "ë‹¬ê±€", "ë”¸ê¸°", "ì„¤íƒ•"], result: "í•‘í¬ì¼€ì´í¬" },
    { ingredients: ["ìˆ˜ì„ í™”", "ë¯¼ë“¤ë ˆ", "ë¸”ë£¨ ìž¬ì¦ˆ"], result: "ê½ƒë‹¤ë°œ" },
    { ingredients: ["ìŠ¤íƒ€í‘¸ë¥´íŠ¸", "ì»¤í”¼"], result: "ìŠ¤íƒ€ë“œë¡­ì»¤í”¼" }
];

// 4. ì•„ì´í…œ ì •ë³´ ë°ì´í„° (ì´ë¯¸ì§€ ê²½ë¡œ í¬í•¨)
const itemData = {
    "ìˆ˜ì„ í™”": { img: "assets/images/items/daffodil.png", desc: "ë´„ì— í”¼ëŠ” ë…¸ëž€ ê½ƒ" }, //ã…Žã…‡
    "ë¯¼ë“¤ë ˆ": { img: "assets/images/items/dandelion.png", desc: "í›„ ë¶ˆë©´ ë‚ ì•„ê°ˆ ê²ƒ ê°™ë‹¤" }, //ã…Žã…‡
    "ì»¤í”¼": { img: "assets/images/items/coffee.png", desc: "ê³ ì†Œí•œ ì›ë‘ í–¥ì´ ë‚œë‹¤" }, //ã…Žã…‡
    "ë¸”ë£¨ ìž¬ì¦ˆ": { img: "assets/images/items/bluejazz.png", desc: "ë™ê·¸ëž€ ëª¨ì–‘ì˜ í‘¸ë¥¸ ê½ƒ" }, //ã…Žã…‡
    "ì¹˜ì¦ˆ": { img: "assets/images/items/cheese.png", desc: "ê¼¬ë¦¿ê¼¬ë¦¿í•œ ëƒ„ìƒˆê°€ ë‚œë‹¤" }, //ã…Žã…‡
    "ì„¤íƒ•": { img: "assets/images/items/Sugar.png", desc: "í˜ˆë‹¹ ê´€ë¦¬ í•´ì•¼í•˜ëŠ”ë°..." }, //ã…Žã…‡
    "í•‘í¬ì¼€ì´í¬": { img: "assets/images/items/pink_cake.png", desc: "ì‚¬ëž‘ìŠ¤ëŸ¬ìš´ í•‘í¬ìƒ‰ ì¼€ì´í¬" }, //ã…Žã…‡
    "ì´ˆì½”ì¼€ì´í¬": { img: "assets/images/items/chocolatecake.png", desc: "ì°í•œ ì´ˆì½œë¦¿ ëƒ„ìƒˆê°€ ë‚œë‹¤" }, //ã…Žã…‡
    "ë”¸ê¸°": { img: "assets/images/items/Strawberry.png", desc: "ëšœì™ˆê¸°!" }, //ã…Žã…‡
    "í–‰ìš´ì˜ ì ì‹¬": { img: "assets/images/items/luckylunch.png", desc: "í–‰ìš´ì´ ì˜¬ ê²ƒ ê°™ë‹¤!" }, //ã…Žã…‡
    "ë°€ê°€ë£¨": { img: "assets/images/items/Flour.png", desc: "ì œë¹µì˜ ê¸°ë³¸ ìž¬ë£Œ" }, //ã…Žã…‡
    "ë‹¬ê±€": { img: "assets/images/items/egg.png", desc: "ìž‘ê³  ì†Œì¤‘í•œ ë‹¬ê±€" }, //ã…Žã…‡
    "í™": { img: "assets/images/items/Clay.png", desc: "í™ì´ë‹¤" }, //ã…Žã…‡
    "ìŠ¤íƒ€í‘¸ë¥´íŠ¸": { img: "assets/images/items/Starfruit.png", desc: "ë³„ ëª¨ì–‘ì˜ ê³¼ì¼" }, //ã…Žã…‡
    "ìŠ¤íƒ€ë“œë¡­ì»¤í”¼": { img: "assets/images/items/stardropcoffee.png", desc: "ì»¤í”¼ê°€ ìƒí¼í•  ìˆ˜ ìžˆë‹¤ë‹ˆ" }, //ã…Žã…‡
    "ë¦¬ëª¨ì»¨": { img: "assets/images/items/remote.png", desc: "ìŒ...?" }, //ã…Žã…‡
    "ê½ƒë‹¤ë°œ": { img: "assets/images/items/bouquet.png", desc: "ë°›ìœ¼ë©´ í–‰ë³µí•  ê²ƒ ê°™ë‹¤" }, //ã…Žã…‡
    "ë¸”ë¡­í”¼ì‰¬": { img: "assets/images/items/blobfish.png", desc: "ì˜¤ìš°..." }, //ã…Žã…‡
    "ë„í† ë¦¬": { img: "assets/images/items/acorn.png", desc: "ë‹¤ëžŒì¥ê°€ ì¢‹ì•„í•  ê²ƒ ê°™ë‹¤" }, //ã…Žã…‡
    "ì—ë„ˆì§€ ë“œë§í¬": { img: "assets/images/items/energytonic.png", desc: "í”¼ë¡œê°€ ì‹¹ ê°€ì‹ ë‹¤" } //ã…Žã…‡
};

// --- 5. ì—”ë”© ìŠ¤í¬ë¦½íŠ¸ ë°ì´í„° (ìˆœì•  6ëª… + ì–‘ë‹¤ë¦¬ 1ëª…) ---
const endingScripts = {
    sion: {
        title: "ì‹œì˜¨ê³¼ì˜ ë”°ëœ»í•œ í‹°íƒ€ìž„",
        image: "assets/images/portraits/sion_happy.png",
        text: "ì–´, {user}ë‹˜. ì•„ì§ ì•ˆ ê°€ì…¨ë„¤ìš”? í•´ ì¡ŒëŠ”ë°.\nê¸°ë‹¤ë ¤ë´ìš”. ë†ìž¥ê¹Œì§€ ê°™ì´ ê°€ìš”. ê°€ë¡œë“±ë„ ë³„ë¡œ ì—†ì–´ì„œ ìœ„í—˜í•´ìš”.\n...ì €ê¸°, í˜¹ì‹œ ì´ë²ˆ ì£¼ë§ì— ì‹œê°„ ê´œì°®ìœ¼ì„¸ìš”?\nì–¼ë§ˆ ì „ì— ì§„ì§œ ê´œì°®ì€ ì›ë‘ë¥¼ êµ¬í–ˆê±°ë“ ìš”. í–¥ì´ ì§„ì§œ ì¢‹ì€ë°...\nì œì¼ ë¨¼ì € {user}ë‹˜í•œí…Œ ë‚´ë ¤ì£¼ê³  ì‹¶ì–´ìš”. ...ìš°ë¦¬ ì§‘ ë†€ëŸ¬ ì˜¬ëž˜ìš”?\në§›ìžˆëŠ” ì»¤í”¼ëž‘, ê·€ì—¬ìš´ ì†Œë“¤ì´ëž‘... ê·¸ë¦¬ê³  ì €ë„ ê¸°ë‹¤ë¦¬ê³  ìžˆì„ê²Œìš”."
    },
    riku: {
        title: "ë¦¬ì¿ ì˜ ì˜ì›í•œ ë‹¨ì§",
        image: "assets/images/portraits/riku_happy.png",
        text: "ëˆ„ë‚˜ëˆ„ë‚˜!! ì´ì œ ì–´ë”” ê°€ë©´ ì•ˆ ëŒ€ì—¬ ì•Œê²Ÿì ¸?\n\në¦¬ì¿ ëŠ” ëˆ„ë‚˜ëž‘ í‰ìƒ~ ê°™ì´ ë†€ ê±°ì•¼!\nì•½ì† ë„ìž¥ ê¾¹!! í—¤í—¤, ì‚¬ëž‘í•´ì—¬!!"
    },
    yushi: {
        title: "ìˆ˜ì¤ì€ ê³ ë°±",
        image: "assets/images/portraits/yushi_happy.png",
        text: "ì—.. ì‚¬ì‹¤ ì²˜ìŒ ëµ€ì„ ë•Œë¶€í„° ë†ìž¥ì£¼ë‹˜ì´ ì‹ ê²½ ì“°ì˜€ì–´ìš”.\n\nì œê°€ í‘œí˜„ì€ ì„œíˆ´ì§€ë§Œ.. ì œ ë§ˆìŒì€ ì§„ì‹¬ì´ì—ìš”.\nì €ì˜ ê³ì— ìžˆì–´ ì£¼ì‹œê² ì–´ìš”?"
    },
    jaehee: {
        title: "ë“ ë“ í•œ íŒŒíŠ¸ë„ˆ",
        image: "assets/images/portraits/jaehee_happy.png",
        text: "í—ˆí—ˆ, ë†ìž¥ì£¼ë‹˜ë§Œí¼ ì €ëž‘ ìž˜ ë§žëŠ” ì‚¬ëžŒì€ ì²˜ìŒ ë´¤ìŠµë‹ˆë‹¤.\n\nìš°ë¦¬ ë‘˜ì´ íž˜ì„ í•©ì¹˜ë©´ ëª» í•  ê²Œ ì—†ê² ì£ .\nì•žìœ¼ë¡œë„ ìž˜ ë¶€íƒí•©ë‹ˆë‹¤, ë‚˜ì˜ íŒŒíŠ¸ë„ˆ."
    },
    ryo: {
        title: "ìµœê³ ì˜ ì½¤ë¹„",
        image: "assets/images/portraits/ryo_happy.png",
        text: "ì•¼í•˜~ ì—­ì‹œ ëˆ„ë‚˜ê°€ ìµœê³ ì•¼!\n\në‚˜ëž‘ ê°™ì´ ìžˆìœ¼ë©´ ì‹¬ì‹¬í•  í‹ˆ ì—†ì„ê±¸?\në‚´ê°€ ë§¤ì¼ë§¤ì¼ ì›ƒê²Œ í•´ ì¤„ê²Œ! ì§„ì§œë£¨!"
    },
    sakuya: {
        title: "ë‹¬ì½¤í•œ ë¹µ ëƒ„ìƒˆ",
        image: "assets/images/portraits/sakuya_happy.png",
        text: "ê°“ êµ¬ìš´ ë¹µ ëƒ„ìƒˆë³´ë‹¤ ë†ìž¥ì£¼ë‹˜ì´ ë” ì¢‹ì€ê±¸ìš”?\n\në§¤ì¼ ì•„ì¹¨ ë§›ìžˆëŠ” ë¹µê³¼ í•¨ê»˜ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦´ê²Œìš”.\nì €ëž‘.. ì‚¬ê·€ì–´ ì£¼ì‹¤ëž˜ìš”?"
    },
    // ì–‘ë‹¤ë¦¬ ì—”ë”© (í˜¸ê°ë„ ë†’ì€ ì‚¬ëžŒì´ 2ëª… ì´ìƒì¼ ë•Œ)
    cheater: {
        title: "ìœ„ì‹œ ë°¸ë¦¬ì˜ ì¹´ì‚¬ë…¸ë°”",
        image: "assets/images/ui/star_icon.png", // ë˜ëŠ” ê²½ê³  ì´ë¯¸ì§€
        text: "ì‹œì˜¨: ë†ìž¥ì£¼ë‹˜.. ì €í•œí…Œë§Œ ìž˜í•´ì£¼ì‹  ê²Œ ì•„ë‹ˆì—ˆë‚˜ìš”?\në¦¬ì¿ : ëˆ„ë‚˜ ë¯¸ì›Œ!! ë¦¬ì¿ ë§Œ ì¢‹ì•„í•œë‹¤êµ¬ í•´ì§œë‚˜!!\n\nëª¨ë‘ì˜ ë§ˆìŒì„ ì–»ìœ¼ë ¤ë‹¤ ê²°êµ­ ì‹ ë¢°ë¥¼ ìžƒê³  ë§ì•˜ìŠµë‹ˆë‹¤...\n(Bad Ending?)"
    },
    // ë…¸ë§ ì—”ë”© (í˜¸ê°ë„ ë¶€ì¡±)
    normal: {
        title: "í‰í™”ë¡œìš´ ê·€ë† ìƒí™œ",
        image: "assets/images/backgrounds/farm.png",
        text: "7ì¼ê°„ì˜ ì²´í—˜ì´ ëë‚¬ìŠµë‹ˆë‹¤.\níŠ¹ë³„í•œ ì¸ì—°ì€ ë§Œë“¤ì§€ ëª»í–ˆì§€ë§Œ, í›Œë¥­í•œ ë†ìž¥ì£¼ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n- The End -"
    }
};

// [ì‹ ê·œ] 5ì¼ì°¨ í€˜ìŠ¤íŠ¸ ë°ì´í„° (íŽ¸ì§€ ë‚´ìš© + ìš”êµ¬ ì•„ì´í…œ + ë³´ìƒ ëŒ€ì‚¬)
const questScripts = {
    riku: {
        letter: "ëˆ„ë‚˜.. ë¦¬ì¿ ëŠ” ìª¼ê¸ˆ ì„œìš´í•´ì—¬.. ã… ã…  ë‚˜ 'ë”¸ê¸°'ê°€ ì§„ì§œ ë¨¹ê³  ì‹¶ì€ë°.. êµ¬í•´ì¤„ ìˆ˜ ì´ì¨ì—¬?",
        item: "ë”¸ê¸°", // ì¸ë²¤í† ë¦¬ì˜ ì•„ì´í…œ ì´ë¦„ê³¼ ì •í™•ížˆ ì¼ì¹˜í•´ì•¼ í•¨
        success: { text: "ì™€ì•„!! ì§„ì§œ êµ¬í•´ì™”ë„¤?! ì—­ì‹œ ëˆ„ë‚˜ë°–ì— ì—†ì–´! ì‚¬ëž‘í•´!!", emotion: "love" }
    },
    sion: {
        letter: "{user} ë‹˜, ì•ˆë…•í•˜ì„¸ìš”. ì‹œì˜¨ìž…ë‹ˆë‹¤. ì´ëŸ° ë¶€íƒ ë“œë¦¬ê¸° ì¢€ ë¯¼ë§í•˜ì§€ë§Œ... ë¯¿ì„ ë§Œí•œ ë¶„ì´ {user} ë‹˜ë°–ì— ì—†ì–´ì„œìš”. ì‚¬ì‹¤ ì œê°€ ì–´ì œ ìˆ²ìœ¼ë¡œ í˜„ìž¥ ì ê²€ì„ ë‚˜ê°”ë‹¤ê°€ ì•„ë¼ëŠ” ë§Œë…„í•„ì„ ìžƒì–´ë²„ë¦° ê²ƒ ê°™ì•„ìš”. ì•„ë²„ì§€ê»˜ ì„ ë¬¼ ë°›ì€ ê±°ë¼ ì €í•œí…ŒëŠ” ì •ë§ ì†Œì¤‘í•œ ë¬¼ê±´ì´ê±°ë“ ìš”. ì œ ê¸°ì–µìœ¼ë¡œëŠ” ë²šê½ƒ ë‚˜ë¬´ ê·¼ì²˜ì—ì„œ ì§€ë„ë¥¼ íŽ¼ì¹˜ë‹¤ê°€ ë–¨ì–´ëœ¨ë¦° ê²ƒ ê°™ì€ë°... í˜¹ì‹œ ë†ìž¥ ì¼í•˜ì‹œë‹¤ê°€ ìˆ²ì— ê°€ì‹¤ ì¼ ìžˆìœ¼ë©´ í•œ ë²ˆë§Œ ì°¾ì•„ë´ ì£¼ì‹¤ ìˆ˜ ìžˆì„ê¹Œìš”? ë‹¤ë¥¸ ì‚¬ëžŒí•œí…Œ ë§í•˜ë©´ ê´€ë¦¬ìžê°€ ì¹ ì¹ ë§žê²Œ ë¬¼ê±´ì´ë‚˜ ìžƒì–´ë²„ë¦°ë‹¤ê³  í• ê¹Œ ë´... {user} ë‹˜í•œí…Œë§Œ ë§ì”€ë“œë¦¬ëŠ” ê±°ì˜ˆìš”. ë¹„ë°€ ì§€ì¼œì£¼ì‹¤ ê±°ì£ ? ë§Œì•½ ì°¾ê²Œ ë˜ë©´ ê¼­ ì‚¬ë¡€í•˜ê² ìŠµë‹ˆë‹¤.",
        item: "ë§Œë…„í•„",
        success: { text: "(ëˆˆì´ íœ˜ë‘¥ê·¸ë ˆì§€ë©°) ì–´! ì´ê±°... ì œ ë§Œë…„í•„! ì§„ì§œ ì°¾ìœ¼ì…¨ì–´ìš”? ìˆ²ì´ ë„“ì–´ì„œ í¬ê¸°í•˜ê³  ìžˆì—ˆëŠ”ë°... ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ê±° ì €í•œí…Œ ì§„ì§œ ì˜ë¯¸ ìžˆëŠ” ê±°ê±°ë“ ìš”. ìžƒì–´ë²„ë¦° ì¤„ ì•Œê³  ì–´ì œ ìž ë„ í•œìˆ¨ ëª» ìž¤ëŠ”ë°...", emotion: "happy" }
    },
    yushi: {
        letter: "ì €ê¸°.. í˜¹ì‹œ 'ìš°ìœ ' ë‚¨ëŠ” ê±° ìžˆìœ¼ì„¸ìš”? ìš”ë¦¬ ì—°ìŠµì„ í•˜ê³  ì‹¶ì€ë° ìž¬ë£Œê°€ ì—†ì–´ì„œìš”..",
        item: "ìš°ìœ ",
        success: { text: "ìš°ì™€! ë•ë¶„ì— ë§›ìžˆëŠ” ê±° ë§Œë“¤ ìˆ˜ ìžˆê² ì–´ìš”! ì§±ì´ë‹¤!", emotion: "happy" }
    },
    // ë‚˜ë¨¸ì§€ ë©¤ë²„ë“¤ë„ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì¶”ê°€ (jaehee, ryo, sakuya ë“±)
};

/* ==========================================================================
   [ì¶”ê°€] ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° Cropper.js ì²˜ë¦¬ ë¡œì§
   ========================================================================== */

let currentCropper = null;
let currentMemberId = null;

// HTMLì´ ëª¨ë‘ ë¡œë“œëœ í›„ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
    
    // ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° (index.htmlì— ì´ IDë“¤ì´ ìžˆì–´ì•¼ í•¨)
    const modal = document.getElementById('crop-modal');
    const imageToCrop = document.getElementById('image-to-crop');
    const btnCrop = document.getElementById('btn-crop');
    const btnCancel = document.getElementById('btn-cancel');

    // NPC ëª©ë¡ì„ ìˆœíšŒí•˜ë©° ì´ë²¤íŠ¸ ì—°ê²°
    const members = Object.keys(npcs); // ['sion', 'riku', 'yushi', ...]

    members.forEach(member => {
        const input = document.getElementById(`upload-${member}`);
        
        if (input) {
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        // 1. í˜„ìž¬ ì–´ë–¤ ë©¤ë²„ë¥¼ ìˆ˜ì • ì¤‘ì¸ì§€ ì €ìž¥
                        currentMemberId = member; 
                        
                        // 2. ëª¨ë‹¬ì— ì´ë¯¸ì§€ ë„ìš°ê¸°
                        imageToCrop.src = event.target.result;
                        if(modal) modal.style.display = 'flex';

                        // 3. ê¸°ì¡´ í¬ë¡œí¼ ì´ˆê¸°í™”
                        if (currentCropper) {
                            currentCropper.destroy();
                        }

                        // 4. ìƒˆ í¬ë¡œí¼ ìƒì„± (1:1 ë¹„ìœ¨ ê°•ì œ)
                        currentCropper = new Cropper(imageToCrop, {
                            aspectRatio: 1, 
                            viewMode: 1,
                            minContainerWidth: 300,
                            minContainerHeight: 300
                        });
                    };
                    reader.readAsDataURL(file);
                }
                // ê°™ì€ íŒŒì¼ ë‹¤ì‹œ ì„ íƒ ê°€ëŠ¥í•˜ê²Œ ì´ˆê¸°í™”
                e.target.value = ''; 
            });
        }
    });

    // [ìžë¥´ê¸° & ì €ìž¥ ë²„íŠ¼ í´ë¦­ ì‹œ]
    if (btnCrop) {
        btnCrop.addEventListener('click', function() {
            if (currentCropper && currentMemberId) {
                // ìžë¥¸ ì´ë¯¸ì§€ë¥¼ Base64 ë°ì´í„°ë¡œ ë³€í™˜
                const croppedCanvas = currentCropper.getCroppedCanvas({
                    width: 200, // ê²Œìž„ ë‚´ í‘œì‹œë  í¬ê¸°
                    height: 200
                });
                const croppedImage = croppedCanvas.toDataURL();

                // 1) ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
                const preview = document.getElementById(`preview-${currentMemberId}`);
                if (preview) preview.src = croppedImage;

                // 2) ê²Œìž„ ë°ì´í„°(npcs) ì—…ë°ì´íŠ¸ â˜…í•µì‹¬â˜…
                if (npcs[currentMemberId]) {
                    npcs[currentMemberId].portrait = croppedImage;
                    console.log(`${currentMemberId}ì˜ ì´ˆìƒí™”ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                }

                // 3) ì •ë¦¬
                modal.style.display = 'none';
                currentCropper.destroy();
                currentCropper = null;
            }
        });
    }

    // [ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ]
    if (btnCancel) {
        btnCancel.addEventListener('click', function() {
            if(modal) modal.style.display = 'none';
            if (currentCropper) {
                currentCropper.destroy();
                currentCropper = null;
            }
        });
    }
});


















